<!DOCTYPE html>
<html lang="en">

<head>TIO TAXI</head>

<head>
    <title>Tio Taxi</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>


<style> 



#map {width: 800px;height: 400px} </style>

</head>



<body onload="readFile()">
<h1 id="output1"></h1>
<h1 id="output2"></h1>
<h1 id="output3"></h1>

<div id="map"> </div>
<script> 
var cont=0;
var marker1;
let arraypoly=[];
var map= L.map("map").setView([10.982088164553303,-74.78344818015789],13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom:18, minZoom:9,
        }).addTo(map);

function readFile(){
    jQuery.get('result.txt', function(data){
        var split = data.split("/")
        data1 =split[0] 
        data2 =split[1]
        data3 =split[2]
        

        var LatLng = L.latLng(data1,data2); 
        arraypoly.push(LatLng);
        
        var latlngs = [arraypoly]
        
        polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);
        if(cont>0){
            marker1.remove();
        }
        marker1 = L.marker(LatLng).addTo(map)
            .bindPopup('Taxi No:1 <br> Placa: AVM569.')
            .openPopup();
            cont++;

        
            
    })
    
}setInterval(readFile,2500);






        
        
      

</script>



<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script src="jscode.js"></script>

</body>

</html>
